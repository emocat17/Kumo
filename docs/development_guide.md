# TaskPyro 前端分阶段开发指南

本指南基于 TaskPyro 的核心业务逻辑（Python版本 -> 环境 -> 项目 -> 任务）制定，旨在提供一条依赖清晰、可逐步验证的开发路径。

## 阶段一：基础架构与公共组件 (Infrastructure)

**目标**：构建稳固的 UI 基础，确保后续业务页面开发高效统一。

1.  **通用布局 (Layout)**
    *   [x] 侧边栏 (Sidebar)：支持展开/折叠，菜单项高亮。
    *   [x] 顶栏 (Header)：用户信息、退出按钮。
    *   [ ] **待优化**：完善路由守卫与面包屑（可选）。

2.  **核心 UI 组件库 (Components)**
    *   **BaseModal**: 封装通用的弹窗容器（标题、内容插槽、底部操作栏），用于所有新建/编辑操作。
    *   **PageHeader**: 统一页面顶部的 标题 + 操作按钮 布局。
    *   **FilterBar**: 封装搜索框与下拉筛选组的组合组件。
    *   **EmptyState**: 统一的空状态占位图与引导文案。

**✅ 验证标准**：
*   任意页面引入 Modal 组件能正常弹出与关闭。
*   侧边栏菜单点击能正确跳转路由并高亮当前项。

---

## 阶段二：核心资源管理 (Core Resources)

**目标**：实现业务流的基础数据管理，为定时任务提供必要的依赖资源。

### 1. Python版本管理 (Python Versions)
*   **业务逻辑**：这是环境构建的基础，必须最先存在。
*   **功能点**：
    *   **版本列表**：展示已下载版本、状态（就绪/下载中）、默认标记。
    *   **添加版本**：输入版本号与下载 URL（需提供官网链接指引）。
*   **交互**：添加后列表应出现新条目，状态可能为"下载中"。

### 2. Python环境管理 (Python Environments)
*   **业务逻辑**：依赖已有的 Python 版本，创建独立的虚拟环境。
*   **功能点**：
    *   **环境列表**：展示环境名、对应 Python 版本、状态。
    *   **新建环境弹窗**：
        *   选择 Python 版本（数据源自上一步）。
        *   输入环境名称。
        *   依赖管理（输入 requirements.txt 内容或上传文件）。
    *   **镜像源管理**：配置 PyPI 镜像源（清华/阿里等）。

### 3. 项目管理 (Projects)
*   **业务逻辑**：上传代码资源，定义工作空间。
*   **功能点**：
    *   **项目列表**：展示项目名、路径、创建时间。
    *   **新项目弹窗**：
        *   输入项目名称。
        *   定义工作路径（建议与 ZIP 文件名一致）。
        *   **ZIP 上传**：核心功能，支持拖拽上传代码包。

**✅ 验证标准**：
*   能成功添加一个 Python 版本（如 3.9.21）。
*   能基于该版本创建一个名为 `base-env` 的环境。
*   能上传一个包含 `script.py` 的 ZIP 包创建一个项目。

---

## 阶段三：任务调度核心 (Task Scheduling)

**目标**：串联资源，实现核心的定时执行逻辑。

### 1. 定时任务 (Scheduled Tasks)
*   **业务逻辑**：聚合 `项目` + `环境` + `命令` + `Cron`。
*   **功能点**：
    *   **任务列表**：展示任务名、下次运行时间、状态开关、操作菜单。
    *   **新建任务弹窗**：
        *   **命令输入**：如 `python script.py`。
        *   **关联项目**：下拉选择（数据源自阶段二.3）。
        *   **关联环境**：下拉选择（数据源自阶段二.2）。
        *   **调度配置**：
            *   Cron 表达式生成/输入。
            *   间隔执行（Interval）。
            *   单次执行（Date）。

**✅ 验证标准**：
*   新建任务时，下拉框能正确显示之前创建的项目和环境。
*   创建任务后，列表中应显示正确的下次执行时间。

---

## 阶段四：系统支撑模块 (Support Modules)

**目标**：完善系统的管理与运维能力。

1.  **分布式节点 (Nodes)**
    *   添加节点（IP/端口），配置定时检查，查看节点状态（连接中/已连接）。
2.  **用户管理 (Users)**
    *   用户列表，添加用户（分配详细权限）。
3.  **日志管理 (Logs)**
    *   查看/清理运行日志。
4.  **仪表盘 (Dashboard)**
    *   聚合展示上述所有模块的统计数据（任务数、节点状态等）。

---

## 开发顺序建议

1.  **Setup**: 完善 `BaseModal` 等公共组件。
2.  **Page 1**: `Python版本` (最简单，无依赖)。
3.  **Page 2**: `Python环境` (依赖版本)。
4.  **Page 3**: `项目` (独立资源)。
5.  **Page 4**: `定时任务` (核心集成点)。
6.  **Page 5+**: 仪表盘及其他管理页面。

请按照此顺序逐步开发，每完成一个阶段进行一次集成测试。
